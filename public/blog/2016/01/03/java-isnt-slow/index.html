
<!DOCTYPE html>


<html class="no-js" lang="en">
<head>
<meta charset="utf-8">
<title>Java isn&#39;t slow - Polina Soshnin</title>
<meta name="author" content="Julia Evans">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="description" content="Java isn&#39;t slow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="canonical" href="https://jvns.ca/blog/2016/01/03/java-isnt-slow/">
<link href="/favicon.ico" rel="icon">
<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
<link href="/atom.xml" rel="alternate" title="Julia Evans" type="application/atom+xml">
 
<link href="https://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='https://fonts.googleapis.com/css?family=Montserrat:700,400' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=Alegreya:400,900,700' rel='stylesheet' type='text/css'>
</head>
<body>
<div id="wrap">
<header role="banner">
<hgroup>
<h1><a href="/">Polina Soshnin</a></h1>
</hgroup>
<ul class="header-links">
<span><li><a href="/about">About</a></li>
<li><a href="/projects">Projects</a></li></span>
    <li><a href="https://github.com/polinadotio">Github</a></li></span>
    <li><a href="https://www.linkedin.com/in/polinasoshnin">LinkedIn</a></li></span>
</ul>
</header>
<nav role="navigation" class="header-nav"><ul class="main-navigation">
<li><a href="/categories/favorite/">Favorites</a></li>
<li><a href="/zines">Zines</a></li>
</ul>
</nav>
<div id="main">
<div id="content">

<div>
<article class="hentry" role="article">
<header>
<h1 class="entry-title">Java isn&#39;t slow</h1>

<div class="post-tags">
  
  •
  
    <a class="post-tag" href="/categories/performance">performance</a> 	•
  
  
</div>
<p class="meta">
<time datetime="2016-01-03T06:27:07" pubdate data-updated="true"></time>
</p>
</header>
<div class="entry-content">
     

<p>This is probably obvious to many of you, but I wanted to write it down just in case.</p>

<p>I used to write Java at work, and my Java programs were really slow. I thought
(and people sometimes told me) that this was because Java is a slow programming
language.</p>

<p>This just isn&rsquo;t true. This article describes the architecture of the <a href="http://martinfowler.com/articles/lmax.html">LMAX Disruptor</a>, a messaging library that they use to process 6 million events per second on a single machine. That article is also SUPER FASCINATING and really worth reading. Java is fast like C is fast (really fast). People write databases (<a href="http://cassandra.apache.org/">Cassandra</a>) in Java!</p>

<p>By &ldquo;Java is fast&rdquo;, I mean something pretty specific &ndash; that you can comfortably do millions of things a second in Java. This isn&rsquo;t true for languages like Python or Ruby &ndash; in the <a href="http://computers-are-fast.github.io/">computers-are-fast game I made</a>, you can see that a pure-python HTTP request parser can parse 25,000 requests a second. I&rsquo;d expect an optimized Java program to do dramatically better than that.</p>

<p>So if your Java code is doing something easier than processing 6 million events a second, and it&rsquo;s slow, you can maybe make it faster! Processing 6 million events per second is actually extremely difficult, but I find it inspiring to think about when I&rsquo;m having trouble processing like.. 10 things per second :)</p>

<p>My Java code was probably slow because I was creating like a bajillion objects all the time, and destroying them, and doing a bajillion allocations takes time, and also it puts pressure on the garbage collector, and&hellip; Well, you get the idea. But code like that is not the whole world!</p>

<p>There&rsquo;s a culture of building high-performance Java code out there. I asked on <a href="https://twitter.com/b0rk/status/683623665800474624">twitter</a> and got linked to <a href="https://github.com/real-logic/Agrona">this interesting-looking data structures library</a> and this <a href="https://github.com/JCTools/JCTools">Java concurrency tools</a> repo. And to Netty! Netty is a networking framework (to build webservers, and other things!) in Java. The <a href="http://netty.io/testimonials">Netty testimonials page</a> says that trading firms (who we all know care a lot about performance!!) use Netty.</p>

<p>There&rsquo;s this high performance <a href="https://github.com/brettwooldridge/HikariCP">database connection pool</a> and a <a href="https://github.com/brettwooldridge/HikariCP/wiki/Down-the-Rabbit-Hole">page explaining how they made it fast</a>. <a href="http://chronicle.software/products/chronicle-map/">Chronicle</a> is a key-value store in Java. And all that&rsquo;s just what I got in 10 minutes from reading a few tweets!</p>

<h3 id="how-to-make-your-java-or-scala-or-clojure-code-fast">How to make your Java (or Scala, or Clojure) code fast</h3>

<p>This is a super small thing, but some people I talked to didn&rsquo;t know this!</p>

<p>Did you know the JVM ships with a free profiler that can tell you which part of your code is the slowest? It&rsquo;s called <a href="https://visualvm.java.net">VisualVM</a>. It’s very easy to use and it&rsquo;s an AWESOME first step to take. Here&rsquo;s a screenshot of VisualVM profiling VisualVM. It&rsquo;s spending most of its time on <code>org.netbeans.swing.tabcontrol.TabbedContainer.paint</code>. So it&rsquo;s mostly working on drawing the screen to show me the results of profiling itself!</p>

<p><a href="/images/visualvm.png"><img src="/images/visualvm-small.png"></a></p>

<p>(<a href="https://www.yourkit.com/">YourKit</a> is better, but VisualVM is free)</p>

<p>It won&rsquo;t get you to LMAX disruptor speed (that&rsquo;s much more serious wizardry), but it is a good first step!</p>

<p>I had some <a href="http://jvns.ca/blog/2015/09/10/a-millisecond-isnt-fast-and-how-we-fixed-it/">slow JVM code</a> at work a while ago. We made it fast. I used VisualVM! So can you :) <a href="http://computers-are-fast.github.io/">Computers</a> are <a href="http://jvns.ca/blog/2014/05/12/computers-are-fast/">fast</a>, and you should expect a lot out of your computer programs.</p>

</div>
<footer>
<div class="sharing">
<a href="http://twitter.com/share" class="twitter-share-button" data-url="https://jvns.ca/blog/2016/01/03/java-isnt-slow/" data-via="b0rk" data-counturl="https://jvns.ca/blog/2016/01/03/java-isnt-slow/">Tweet</a>
</div>
<p class="meta">
   
    <a class="basic-alignment left" href="https://jvns.ca/blog/2016/01/06/talking-about-stock-options/" title="Previous Post: Talking about stock options = awesome">Talking about stock options = awesome</a>
  
   
    <a class="basic-alignment right" href="https://jvns.ca/blog/2016/01/02/winning-the-bias-variance-tradeoff/" title="Previous Post: Winning the bias-variance tradeoff">Winning the bias-variance tradeoff</a>
  
</p>
</footer>
</article>
</div>

</div>
</div>
<nav role="navigation" class="footer-nav"> <a href="/">Archives</a>
</nav>
<footer role="contentinfo"><span class="credit">&copy; 2016 Polina Soshnin.
</footer>
</div>
</body>
</html>

